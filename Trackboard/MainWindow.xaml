<Window x:Class="Trackboard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cv="clr-namespace:Trackboard"
        Title="MainWindow" Height="582" Width="1024"
        WindowStyle="None" ResizeMode="NoResize"
        IsTabStop="False" AllowsTransparency="True" 
        Background="Transparent" BorderBrush="#FF3F3F3F"
        SnapsToDevicePixels="True"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType"
        WindowStartupLocation="CenterScreen"
        MouseDown="Window_MouseDown_1">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="itempanel" TargetType="{x:Type Control}">
                <Setter Property="Tag" Value="0"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <ControlTemplate.Resources>
                                <Storyboard x:Key="stb" Storyboard.TargetProperty="Tag" Duration="0:0:0:0.3">
                                    <DoubleAnimation To="0.8"/>
                                </Storyboard>
                            </ControlTemplate.Resources>
                            <Grid>
                                <ScrollViewer Style="{StaticResource for_scrollviewer}" HorizontalScrollBarVisibility="Disabled">
                                    <ListBox Style="{StaticResource ImageListBox}" ItemsSource="{Binding}">
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource ImageListBoxItem}">
                                                <Style.Triggers>
                                                    <EventTrigger RoutedEvent="MouseDoubleClick">
                                                        <BeginStoryboard Storyboard="{StaticResource stb}"/>
                                                    </EventTrigger>
                                                </Style.Triggers>
                                                <EventSetter Event="MouseDoubleClick" Handler="Item_MouseDoubleClick"/>
                                            </Style>
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </ScrollViewer>
                                <Border Name="detailpanel" Background="{StaticResource Color_c}"
                                CornerRadius="4" Margin="4" Opacity="{TemplateBinding Tag}" Visibility="Visible">
                                    <Grid Margin="4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="184"/>
                                        </Grid.ColumnDefinitions>
                                        <Canvas Grid.Column="1" Background="{StaticResource Color_b}">
                                            <Canvas.Resources>
                                                <cv:IMGPathConverter x:Key="imgcv"/>
                                                <cv:DatetimeConverter x:Key="datecv"/>
                                            </Canvas.Resources>
                                            <Image Height="240" Width="180" Margin="2" Canvas.Top="4" Source="{Binding Path=SID,Converter={StaticResource imgcv}}"/>
                                            <StackPanel Canvas.Top="250" Width="180" Margin="2">
                                                <TextBlock Height="50" Margin="2" Text="{Binding SName}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                                <TextBlock Height="50" Margin="2" Text="{Binding SID}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                                <TextBlock Height="50" Margin="2" Text="{Binding Path=SBirth,Converter={StaticResource datecv}}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                                <TextBlock Height="50" Margin="2" Text="{Binding SPhone}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                            </StackPanel>
                                        </Canvas>
                                    </Grid>
                                </Border>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Border
        x:Name="m_edgeBorder"
        x:FieldModifier="private"
        Margin="10"
        IsHitTestVisible="False"
        BorderBrush="#FFACACAC"
        BorderThickness="1"
        IsEnabled="False"
        Background="White">
            <Border.Effect>
                <DropShadowEffect
                Opacity="0.56"
                BlurRadius="16"
                ShadowDepth="0" />
            </Border.Effect>
        </Border>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Path Name="pathheader" Grid.Row="0" Fill="{StaticResource Color_b}" Stretch="Fill" Data="M 0,0 L 0,45 10,50 10,45 1014,45 1014,50 1024,45 1024,0 Z"/>
            <Canvas Grid.Row="0">
                <Button Canvas.Right="80" Canvas.Top="10" Width="25" Height="25" Style="{StaticResource ButtonMin}" Foreground="White" Click="Button_Click_1"/>
                <Button Canvas.Right="50" Canvas.Top="10" Width="25" Height="25" Style="{StaticResource ButtonMax}" Foreground="White" Click="Button_Click_2"/>
                <Button Canvas.Right="20" Canvas.Top="10" Width="25" Height="25" Style="{StaticResource ButtonClose}" Foreground="White" Click="Button_Click_3"/>
            </Canvas>
            <TabControl Name="tabcontrol" Margin="10,5,10,10" Style="{StaticResource TabControlStyle}" Grid.Row="1">
                <TabItem Header="ABSOLUTE" Margin="0" Style="{StaticResource listTabItemStyle}">
                    <!--<Grid>
                    <ScrollViewer Style="{StaticResource for_scrollviewer}" HorizontalScrollBarVisibility="Disabled">
                            <ListBox Name="liststu" Style="{StaticResource ImageListBox}">
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource ImageListBoxItem}">
                                        <EventSetter Event="MouseDoubleClick" Handler="Item_MouseDoubleClick"/>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                            </ListBox>
                        </ScrollViewer>
                        <Border Name="detailpanel" Background="{StaticResource Color_c}" Opacity="0.7"
                                CornerRadius="4" Margin="4,400" Visibility="Visible">
                            <Grid Margin="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="184"/>
                                </Grid.ColumnDefinitions>
                                <Canvas Grid.Column="1" Background="{StaticResource Color_b}">
                                    <Canvas.Resources>
                                        <cv:IMGPathConverter x:Key="imgcv"/>
                                        <cv:DatetimeConverter x:Key="datecv"/>
                                    </Canvas.Resources>
                                    <Image Height="240" Width="180" Margin="2" Canvas.Top="4" Source="{Binding Path=SID,Converter={StaticResource imgcv}}"/>
                                    <StackPanel Canvas.Top="250" Width="180" Margin="2">
                                        <TextBlock Height="50" Margin="2" Text="{Binding SName}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                        <TextBlock Height="50" Margin="2" Text="{Binding SID}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                        <TextBlock Height="50" Margin="2" Text="{Binding Path=SBirth,Converter={StaticResource datecv}}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                        <TextBlock Height="50" Margin="2" Text="{Binding SPhone}" Foreground="White" FontSize="28" TextAlignment="Center"/>
                                    </StackPanel>
                                </Canvas>
                            </Grid>
                        </Border>
                    </Grid>-->
                    <Control Style="{StaticResource itempanel}"/>
                </TabItem>
                <TabItem  Header="ABSOLUTE" Margin="0" Style="{StaticResource listTabItemStyle}">
                    <Control Style="{StaticResource itempanel}"/>
                </TabItem>
            </TabControl>
        </Grid>
    </Grid>
</Window>
